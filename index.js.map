{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '30786866-3f5d93462a7f9cfec75d687d6';\nconst BASE_URL = 'https://pixabay.com/api/';\n// const DEFAULT_PARAMS = `?key=${API_KEY}&lang=en&image_type=photo&orientation=horizontal&safesearch=true&order=popular&per_page=12`;\n\n//======реалізація через fetch\n// export async function getImagesByQuery(query) {\n// try {\n//     const response = await fetch (BASE_URL + DEFAULT_PARAMS + `&q=${query}`);\n\n//     console.log(response);\n\n//     if (!response.ok) {\n//         throw new Error (response.statusText);\n//     }\n\n//     const images = await response.json();\n//     return images;\n// }\n// catch (error) {\n//     console.dir(error);\n// }\n// }\n\n//======реалізація через axios\n\nconst instance = axios.create({\n  baseURL: BASE_URL,\n  params: {\n    key: API_KEY,\n    lang: 'en',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    order: 'popular',\n    per_page: 15,\n  },\n});\n\nexport async function getImagesByQuery(query, page) {\n  try {\n    const response = await instance({ params: { q: query, page: page } });\n    return response.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n//=====gallery\n\nexport function createGallery(images) {\n  const galleryList = document.querySelector('.gallery');\n  let galleryMarkup = '';\n  galleryMarkup = images\n    .map(\n      ({\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n        largeImageURL,\n      }) => {\n        return `\n        <li class=\"gallery-item\">\n        \n        <a href=\"${largeImageURL}\"  >\n       \n        <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\"/>\n        </a>\n\n       \n\n        <div class=\"item-info\">\n        <div class=\"info-item\">\n                    <b>Likes</b>\n                    ${likes}\n                </div>\n                <div class=\"info-item\">\n                    <b>Views</b>\n                    ${views}\n                </div>\n                <div class=\"info-item\">\n                    <b>Comments</b>\n                    ${comments}\n                </div>\n                <div class=\"info-item\">\n                    <b>Downloads</b>\n                    ${downloads}\n                </div>\n        \n        </div>\n       </li>\n        `;\n      }\n    )\n    .join('');\n  galleryList.insertAdjacentHTML('beforeend', galleryMarkup);\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n    spinner: true,\n  });\n}\n\nexport function clearGallery() {\n  document.querySelector('.gallery').innerHTML = '';\n}\n\n//=====Loader\n\nexport function showLoader(el) {\n  document.querySelector('.loader-box').style.display = 'flex';\n}\n\nexport function hideLoader(el) {\n  document.querySelector('.loader-box').style.display = 'none';\n}\n\n//=====Load more button\n\nexport function showLoadMoreButton() {\n  document.querySelector('#load-more-button').style.display = 'flex';\n}\n\nexport function hideLoadMoreButton() {\n  document.querySelector('#load-more-button').style.display = 'none';\n}\n","'use strict';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImagesByQuery } from './js/pixabay-api';\n\nimport {\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  createGallery,\n  clearGallery,\n} from './js/render-functions';\n\nconsole.log('Hello from main.js!');\n\nconst searchBtn = document.querySelector('#search-button');\nconst loadMoreBtn = document.querySelector('#load-more-button');\nconst searchField = document.querySelector('#search-field');\n\n// =====Search Button Logic\nlet page = 1;\nlet query = '';\nlet loadedNumber = 0;\n\nsearchBtn.addEventListener('click', async event => {\n  event.preventDefault();\n  clearGallery();\n  query = searchField.value.trim();\n  showLoader();\n\n  try {\n    if (query === '') {\n      page = 1;\n      loadedNumber = 0;\n      hideLoadMoreButton();\n      iziToast.info({\n        message: 'Please enter a search query.',\n        position: 'topRight',\n      });\n      hideLoader();\n      return;\n    }\n\n    const images = await getImagesByQuery(query, page);\n\n    searchField.value = '';\n    iziToast.destroy();\n    console.log(images.hits);\n    loadedNumber += images.hits.length;\n    createGallery(images.hits);\n\n    hideLoader();\n    showLoadMoreButton();\n  } catch (error) {\n    console.dir(error);\n  }\n});\n\n// =====Load more Button Logic\nloadMoreBtn.addEventListener('click', async event => {\n  event.preventDefault();\n  showLoader();\n  page += 1;\n\n  try {\n    const images = await getImagesByQuery(query, page);\n    console.log(images);\n    createGallery(images.hits);\n    const card = document.querySelector('.gallery-item');\n    const cardHeight = card.getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight.height * 2,\n      behavior: 'smooth',\n    });\n\n    loadedNumber += images.hits.length;\n    console.log('завантажено: ', loadedNumber + 'з', images.totalHits);\n    hideLoader();\n    if (loadedNumber >= images.totalHits) {\n      hideLoadMoreButton();\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    console.dir(error);\n  }\n});\n"],"names":["API_KEY","BASE_URL","instance","axios","getImagesByQuery","query","page","error","createGallery","images","galleryList","galleryMarkup","webformatURL","tags","likes","views","comments","downloads","largeImageURL","SimpleLightbox","clearGallery","showLoader","el","hideLoader","showLoadMoreButton","hideLoadMoreButton","searchBtn","loadMoreBtn","searchField","loadedNumber","event","iziToast","cardHeight"],"mappings":"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"}